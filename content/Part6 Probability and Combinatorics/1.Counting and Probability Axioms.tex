\chapterimage{orange2.jpg}
\chapterspaceabove{6.75cm} 
\chapterspacebelow{7.25cm} 



\chapter{Introduction to Counting and Probability }\label{counting}
In this part, we discuss wider topics on probability and probability distributions. 
Probability theory is a branch of mathematics that deals with the analysis of random phenomena. The fundamental concept of the theory is the probability measure, a way of assigning a number to each plausible outcome of an event in such a way that the number reflects the event's likelihood of occurring. This mathematical framework allows for the study and modeling of uncertainty and complexity in various fields, ranging from physics and biology to economics and psychology. By providing the tools to make quantitative predictions about the likelihood of certain outcomes, probability theory forms the basis for statistical inference, enabling scientists and statisticians to infer properties about a population given a sample. The origins of probability theory can be traced back to the analysis of games of chance and has since evolved into a vital component of both theoretical and applied mathematics.

    \section{Counting Principal}
    The very first section in this chapter focuses on the basics of counting, which is the foundation of the whole probability theory. In the study of probability, we aim to measure 
    random events, and to do this, we must know their frequency, or rather, how many possible outcomes each event has. Counting method allows us to get the possible number of outcomes in a 
    systematic way.

    \subsection{Principal of Counting}
    We may start with the most basic counting. Considering tossing a coin, and we make the assumption that this coin is unbiased, meaning that the chance of getting a chance or tail must be 
    exactly $\frac{1}{2}$. In this case, the total possible number of outcome is 2. This conclusion is obviously true and can be obtained by intuition, because we cannot find a third case that the result is neither a head nor a tail, as the event
    is binary.

    Now let's increase the number of trials, how many outcomes can we have when tossing a coin twice? If we use T to denote that the result is a head and F for the tail, like what we have
    done in Boolean Algebra, we have 4 ways to arrange the possibilities:
    $$(T,T), (T,F), (F,T),(F,F).$$
    Thus we conclude that we have 4 possible outcomes. 

    This example lead us to a fundamental theorem in counting.
    \begin{theorem}[The Basic Principal of Counting]\label{Principal of Counting}
        Suppose that two experiments are to be performed. Then if experiment1 can
        result in any one of $m$ possible outcomes and if, for each outcome of experiment 1, there are $n$ possible outcomes of experiment 2, then together there are $mn$
        possible outcomes of the two experiments.
    \end{theorem}

    This theorem could be proved by mathematical induction.
    \begin{proof}
        Start with the base case of $m = n = 1$, there are only 1 possible combination of event 1 and event 2.
        We move on to the case when $m = n = 2$, there are $4 = 2\times 2$ outcomes: $(1, 1), (1, 2), (2, 1), (2, 2)$.
        Suppose that the number of outcomes for each event are any integer $n \in \mathbb{N}^+$, similarly, we can enumerate all the cases from $(1, 1)$ to $(n, n)$,  $n^2 = n\times n$ outcomes.
        For the case when the number of outcomes coming to $n+1$. We can still enumerate all $(n+1)^2 = (n+1)\times(n+1)$ outcomes in a similar way.
        \par Therefore, the theorem is proven. This could be visualized by $$\begin{array}{l}(1,1),(1,2), \ldots,(1, n) \\(2,1),(2,2), \ldots,(2, n) \\\vdots \\(m, 1),(m, 2), \ldots,(m, n)\end{array}$$
    \end{proof}

    \begin{example}
        A small community consists of 10 women, each of whom has 3 children. If one woman and one of her children are to be chosen as mother and child of the year,
        how many choices are possible?
    \end{example}
        \begin{solution}
            By theorem\ref{Principal of Counting}, the event chosen as woman has $m=10$ outcomes, while there are $n = 3$ outcomes for choosing children. 
            Hence the total combinations will be $m\times n = 10\times 3 =30 $
        \end{solution}
    But mathematicians hate listing possible cases. Is there a way to describe the relation between the trial of events and number
    of possible outcomes? Think about the way we treat Boolean variables in the truth table, to get the possible outcomes, we arrange them in all possible ways to get a complete
    truth table. Just like what we do here, we are making trials twice here for tossing coins, each trial has 2 outcomes, and when we make a truth table, we are generating combinations of
    Boolean value, and we know that $n$ Boolean variable has $2^n$ ways of arrangement. So we can say that tossing a coin here could be fitted into this relation when $n=2$, and they are
    actually equivalent in terms of  counting the number of outcomes. With this, we can deduce that if we toss the coin for $n$ times, we also have $2^n$ outcomes.

    This allows us to generalize theorem \ref{Principal of Counting}.

    \begin{theorem}[The Generalized Principal of Counting]\label{Generalized Principal of Counting}
        If $r$ experiments that are to be performed are such that the first one may result in any of $n_1$ possible outcomes; and if, for each of these $n_1$  possible outcomes,
        there are $n_2$  possible outcomes of the second experiment; and if, for each of the possible outcomes of the first two experiments, there are $n_3$  possible outcomes
        of the third experiment; and if ..., then there is a total of  $\Pi_{k=1}^r{n_k} = n_1 \cdot n_2 \dots n_r$ possible outcomes of the $r$ experiments.
    \end{theorem}

    Similarly, this theorem could be proven by mathematical induction with theorem\ref{Principal of Counting} as a lemma. We leave this proof as an exercise.

    This theorem also what we call product rule of counting, which also applicable to probability, which we will discuss in the next section.

    Now we introduce another parallel theorem known as addition rule of counting. This is even easier to understand, suppose 
    \begin{theorem}[Addition Rule of Counting]\label{Adittion Rule}
        Suppose that an experiment can be performed in one of $m$ ways \textbf{or} in one of $n$ ways. Where none of the $n$ ways are the same as the $m$
        ways, then there are $m+n$ ways to perform it.
    \end{theorem}
    This theorem could be proven directly by using set.
    \begin{proof}
        Let \( A \) and \( B \) be finite sets such that \( A \cap B = \emptyset \). By the definition of disjoint sets, no element is in both \( A \) and \( B \).
        
        Let \( a_i \) be an element in \( A \) and \( b_j \) be an element in \( B \), for \( i = 1, 2, \ldots, n \) and \( j = 1, 2, \ldots, m \). The set \( A \) contains exactly \( n \) elements and \( B \) contains exactly \( m \) elements.
        
        The union \( A \cup B \) is a set containing all the elements \( a_i \) and \( b_j \) without any repetition, since \( A \) and \( B \) are disjoint.
        
        Therefore, the set \( A \cup B \) has \( n + m \) elements, which proves the theorem.
        \end{proof}
    \begin{example}
        A student can choose a computer project from one of three lists. The three lists contain 23, 15, and 19 possible projects, respectively. 
        No project is on more than one list. How many possible projects are there to choose from?
    \end{example}
    \begin{solution}
        By addition rule, the student can choose a project by selecting a project from the first list, the second list, or the third list. Because no project is on more than one list, 
        by the sum rule there are $23 + 15 + 19 = 57$ ways to choose a project.
    \end{solution}

    \begin{example}
        How many different license plates can be made if each plate contains a sequence of three uppercase English letters followed by three digits (and no sequences of letters are prohibited, even if they are obscene)?
    \end{example}
        
        \begin{solution}
        To determine the number of different license plates possible, we use the rule of product, also known as the counting principle. 
        
        Each of the three positions for the letters can be filled with any of the 26 letters of the English alphabet. Similarly, each of the three positions for the digits can be filled with any of the 10 digits from 0 to 9.
        
        Therefore, the total number of possible license plates is given by:
        \[ 26 \times 26 \times 26 \times 10 \times 10 \times 10 = 26^3 \times 10^3 \]
        
        Calculating the powers, we get:
        \[ 26^3 = 26 \times 26 \times 26 = 17576 \]
        \[ 10^3 = 10 \times 10 \times 10 = 1000 \]
        
        Multiplying these together, we find the total number of different license plates that can be made:
        \[ 17576 \times 1000 = 17576000 \]
        
        Hence, there are 17,576,000 different possible license plates.
        \end{solution}
        
        To correctly count the number of ways to do the two tasks, we must subtract the number of ways that are counted twice. This leads us to an important counting rule.
        Actually, we have already covered this conclusion in set theory.

        The Subtraction Rule in set theory is a straightforward concept used when we need to find the number of elements in a set by excluding those that meet certain criteria. It states that if we have a universal set \( U \) and a subset \( A \) that we wish to exclude, then the number of elements not in \( A \) is \( |U| - |A| \), where \( |S| \) denotes the cardinality of set \( S \).

        The Principle of Inclusion-Exclusion extends the Subtraction Rule for multiple sets. It corrects the overcounting that occurs when we subtract the cardinalities of overlapping sets from the universal set. For two sets \( A \) and \( B \), it is given by \( |A \cup B| = |A| + |B| - |A \cap B| \).
        
        \begin{theorem}[Subtraction Rule]
            If a task can be done in either $n_1$ ways or $n_2$ ways, then the number of ways to do the task is $n_1+n_2$ minus the number of ways to do the task that are common to the two different ways.
        \end{theorem}
        Here are two examples demonstrating these rules.
        \begin{example}
            Suppose a library has 1,000 books, 300 of which are fiction. If we want to know how many books are non-fiction, we can use the Subtraction Rule:
            $$ \text{Number of non-fiction books} = |U| - |A| = 1,000 - 300 = 700. $$
        \end{example}

        \begin{example}
            In a survey of 200 people, 120 say they like tea, and 150 like coffee. If 50 people like both tea and coffee, to find out how many people like either tea or coffee, we apply the Principle of Inclusion-Exclusion:
            $$ \text{Number of people who like tea or coffee} = |A| + |B| - |A \cap B| = 120 + 150 - 50 = 220. $$
        \end{example}

        We also have division rule of counting, which could be further explained by equivalence class. 
        \begin{theorem}[Rule of Division]
            The rule of division states that there are $n/d$ ways to do a task if it can be done using a procedure that can be carried out in 
                $n$ ways, and for each way $w$, exactly $d$ of the $n$ ways correspond to the way $w$. In a nutshell, the division rule is a common way to ignore "unimportant" differences when counting things.
        \end{theorem}
            This theorem could be further explained by congruence class.
            \begin{example}
                Suppose a set \(X\) with \(n\) elements is partitioned into \(k\) equivalence classes by an equivalence relation, and each equivalence class contains \(m\) elements. If we wish to count the number of distinct subsets of \(X\) that can be formed without regard to the ordering of elements within each equivalence class, we can apply the Division Rule. Since each equivalence class is indistinguishable in terms of the partition, the total number of distinct subsets is \(n/m\), where \(n\) is the total number of elements in the set, and \(m\) is the number of elements in each equivalence class.
            \end{example}

            \begin{example}
                If the total degree of a graph is 58, how many edges does it have?
            \end{example}
            \begin{solution}
                hen we count the degrees, we count each edge twice, so there are 58/2 = 29 edges.
            \end{solution}
    \subsection{Pigeonhole Theorem}
        We also have another useful conclusion on counting called pigeonhole theorem. Suppose we have 8 pigeons and 7 pigeonholes, then there must be one pigeonhole that
        holds 2 pigeons.
        \begin{theorem}[pigeonhole theorem]
            If $k$ is a positive integer and $k+1$ or more objects are placed into $k$ boxes, then there is at least one box containing two or more of the objects.
        \end{theorem}
        
        \begin{proof}
            We prove the pigeonhole principle using a proof by contraposition. Suppose that none of the $k$ boxes contains more than one object. Then the total number of objects would be 
            at most $k$ This is a contradiction, because there are at least $k+1$ objects.
        \end{proof}
        This theorem could also be generalized.
        \begin{theorem}[Generalized Pigeonhole Principle]
            If \( N \) objects are placed into \( k \) boxes, then there is at least one box containing at least \( \lceil N/k \rceil \) objects.
            \end{theorem}
            
            \begin{proof}
            We will prove the statement by contraposition. Let us assume that no box contains \( \lceil N/k \rceil \) or more objects. This means each box has at most \( \lceil N/k \rceil - 1 \) objects.
            And the number of objects being placed cannot be $N$, so we have the number of object less than $N$ (this is obvious because it can't be greater than $N$). 
            
            The total number of objects, under this assumption, can be represented by multiplying the number of boxes by the maximum number of objects each box could contain:
            \[
            k \left( \left\lceil \frac{N}{k} \right\rceil - 1 \right)
            \]
            Using the property that \( \lceil x \rceil \leq x + 1 \) for any real number \( x \), we substitute \( \frac{N}{k} \) for \( x \) to obtain:
            \begin{remark}
                We get this result in integer function, just in case that you don't remember...
            \end{remark}
            \[
            \left\lceil \frac{N}{k} \right\rceil \leq \frac{N}{k} + 1
            \]
            Applying this to our previous equation:
            \[
            k \left( \left\lceil \frac{N}{k} \right\rceil - 1 \right) < k \left( \frac{N}{k} + 1 - 1 \right) = N
            \]
            This shows that the total number of objects is less than \( N \) under our initial assumption, which is a contradiction since we started with \( N \) objects.
            
            Thus, the contrapositive has been proven true: if all boxes have fewer than \( \lceil N/k \rceil \) objects, then we do not have \( N \) objects. Therefore, by contraposition, the original statement is also true: if \( N \) objects are placed into \( k \) boxes, there must be at least one box with \( \lceil N/k \rceil \) or more objects.
            \end{proof}
            
        \begin{example}
            \begin{itemize}
                \item Among any group of 367 people, there must be at least two with the same birthday, because
                there are only 366 possible birthdays.
                \item In any group of 27 English words, there must be at least two that begin with the same letter,
                because there are 26 letters in the English alphabet.
            \end{itemize}
        \end{example}

        \begin{example}
            What is the minimum number of students required in a discrete mathematics class to be sure that at least six will receive the same grade, if there are five possible grades, A, B, C, D, and F?
            \end{example}
            
            \begin{proof}
            The minimum number of students needed to ensure that at least six students receive the same grade can be found using the Pigeonhole Principle. According to this principle, if \(N\) objects (in this case, students) are distributed among \(k\) categories (in this case, grades), and if \(N > k \cdot (m-1)\) where \(m\) is the minimum number of objects that we want in at least one category, then at least one category must contain at least \(m\) objects.
            
            Here, we want \(m = 6\) students to have the same grade and we have \(k = 5\) grades. We can apply the formula to find the minimum \(N\):
            
            \[ N > 5 \cdot (6-1) \]
            \[ N > 25 \]
            
            The smallest integer greater than 25 is 26, so at least 26 students are needed to guarantee that at least six will receive the same grade. If we had only 25 students, it could happen that each of the five grades is assigned to exactly five students, which means no grade would have six students. Therefore, 26 is the minimum number of students required to ensure that at least six students will receive the same grade.
            \end{proof}


    \subsection{Exercises}
    \begin{exercise}
        Prove the Generalized Principal of Counting.
    \end{exercise}
    \begin{proof}
        We proceed by mathematical induction on \( r \), the number of experiments.
        
        \textbf{Base Case:} For \( r = 1 \), the theorem trivially holds since there are \( n_1 \) possible outcomes for the single experiment.
        
        \textbf{Inductive Step:} Assume that the theorem holds for \( r = k \), that is, there are \( \prod_{i=1}^k n_i \) outcomes for \( k \) experiments. Now consider \( r = k + 1 \) experiments. For the first \( k \) experiments, by the inductive hypothesis, we have \( \prod_{i=1}^k n_i \) outcomes. For each of these outcomes, the \( (k+1)^{th} \) experiment can have \( n_{k+1} \) outcomes. Therefore, the total number of outcomes for \( k + 1 \) experiments is:
        
        \[
        \left( \prod_{i=1}^k n_i \right) \cdot n_{k+1} = \prod_{i=1}^{k+1} n_i
        \]
        
        This completes the inductive step and thus the proof.
    \end{proof}
        
    \begin{exercise}
        How many functions are there from a set with $m$ elements to a set with $n$ elements?
    \end{exercise}
    \begin{solution}
        A function corresponds to a choice of one of the $n$ elements in the codomain for each of
        the $m$ elements in the domain. Hence, by the product rule there are $n\cdot n\cdot\cdots\cdot n=n^m$ functions from a set with $m$ elements to one with $n$ elements. 
    \end{solution}

    \begin{exercise}
        How many one-to-one functions are there from a set with $m$ elements to one with $n$ elements?
    \end{exercise}
        \begin{solution}
            First note that when $m>n$ there are no one-to-one functions from a set with $m$ elements to a set with $n$ elements.
            
            Now let $m\leq n.$ Suppose the elements in the domain are $\alpha_1,\alpha_2,\ldots,\alpha_m$ .There are $n$ ways to choose the value of the function at $\alpha_1.$ 
            Because the function is one-to-one, the value of the function at $\alpha_{2}$ can be picked in $n-1$ ways (because the value used for $\alpha_{1}$ cannot be used again). 
            In general, the value of the function at $a_k$ can be chosen in $n-k+1$ ways. By the product rule, there are $n(n-1)(n-2)\cdots(n-m+1)$ one-to-one functions from a set 
            with $m$ elements to one with $n$ elements.
        \end{solution}

    \begin{exercise}
        Prove that if \( A_1, A_2, \ldots, A_m \) are finite sets, then the number of elements in the Cartesian product of these sets is the product of the number of elements in each set.
    \end{exercise}
        
        \begin{proof}
        Consider the finite sets \( A_1, A_2, \ldots, A_m \) with respective cardinalities \( |A_1|, |A_2|, \ldots, |A_m| \). The Cartesian product \( A_1 \times A_2 \times \cdots \times A_m \) is defined as the set of all ordered \( m \)-tuples \( (a_1, a_2, \ldots, a_m) \) where \( a_i \in A_i \) for each \( i \).
        
        To construct an element of the Cartesian product, we must choose an element from each set \( A_i \). The number of ways to choose an element from \( A_1 \) is \( |A_1| \), from \( A_2 \) is \( |A_2| \), and so on, until \( A_m \) which is \( |A_m| \).
        
        By the product rule of counting, the total number of ways to make these choices is the product of the number of choices for each set, which gives us:
        
        \[ |A_1 \times A_2 \times \cdots \times A_m| = |A_1| \cdot |A_2| \cdot \ldots \cdot |A_m| \]
        
        This product counts the number of distinct ordered \( m \)-tuples that can be formed, which is exactly the number of elements in the Cartesian product \( A_1 \times A_2 \times \cdots \times A_m \). Hence, the proof is complete.
        \end{proof}
    
    \begin{exercise}
        Let $A$ and $B$ be finite sets. $|A| = k+1$, $|B| = k$, prove that there is no one-to-one function defined in the mapping $A \to B$.
    \end{exercise}
        \begin{solution}
            By pigeonhole theorem, we have $k+1$ pigeons but only $k$ pigeonholes, so one pigeonhole must have $\lceil k+1/k \rceil = 2$ pigeonholes. This means that there is always one
            element from the codomain are mapped from the same element in the domain. Hence, the statement is proven.
        \end{solution}
        \begin{exercise}
            How many cards must be selected from a standard deck of 52 cards to guarantee that:
            \begin{enumerate}
                \item[a)] At least three cards of the same suit are selected?
                \item[b)] At least three hearts are selected?
            \end{enumerate}
            \end{exercise}
            
            \begin{solution}
            \textbf{a)} Suppose there are four boxes, one for each suit, and as cards are selected they are placed in the box reserved for cards of that suit. By the generalized pigeonhole principle, we see that if \( N \) cards are selected, there is at least one box containing at least \( \lceil N/4 \rceil \) cards. To ensure that at least three cards of one suit are selected, we need \( \lceil N/4 \rceil \geq 3 \). The smallest integer \( N \) satisfying this condition is \( N = 2 \cdot 4 + 1 = 9 \), since selecting 8 cards could result in two cards of each suit, but the ninth card guarantees three of one suit.
            
            \textbf{b)} Without the pigeonhole principle, we consider the worst-case scenario where the selected cards are all from the clubs, diamonds, and spades suits. There are 13 cards in each suit, so after selecting all 39 of these, the next three cards must be hearts. Therefore, we may need to select up to 42 cards to guarantee three hearts.
        \end{solution}
            

    \begin{exercise}
        Let \( X = \{a, b, c, d\} \).
        \begin{enumerate}
            \item[(a)] How many possible relations are there on \( X \)?
            \item[(b)] How many of these are reflexive?
            \item[(c)] How many of these are reflexive and symmetric?
            \item[(d)] How many of these are equivalence relations?
            \item[(e)] What would the answers to (a), (b) and (c) be if \( |X| = n \) instead of \( |X| = 4 \)?
        \end{enumerate}

    \end{exercise}    
    \begin{solution}
        For (a), the number of possible relations on a set $X$ is equal to the number of subsets of the power set $P(X \times X)$, which is $2^{|X \times X|} = 2^{16}$, since there are 16 possible pairs in $X \times X$ for $|X| = 4$.
        
        For (b), the number of reflexive relations on set $X$ can be found by considering that each element must be related to itself, fixing the diagonal entries of the relation matrix to 1. This leaves the other $16 - 4 = 12$ pairs, which correspond to the non-diagonal cells in the relation matrix, to be freely chosen as either part of the relation or not. Hence, there are $2^{12}$ reflexive relations, which is derived by using the division rule to divide the total number of relations by the number of choices for the diagonal (which is fixed), giving $\frac{2^{16}}{2^4} = 2^{12}$.
        
        For example, the relation matrix for a reflexive relation would be:
        $$
        R = \begin{bmatrix}
        1 & a & b & c \\
        d & 1 & e & f \\
        g & h & 1 & i \\
        j & k & l & 1 \\
        \end{bmatrix}
        $$
        \begin{remark}
        In the matrix $R$, the letters $a, b, c, d, \ldots, l$ represent arbitrary binary choices (either 0 or 1), not elements of the set $X$.
        \end{remark}
        
        For (c), a relation that is both reflexive and symmetric requires that for any $R_{ij} = 1$, the symmetric counterpart $R_{ji} = 1$ also holds. This reduces the number of independent binary choices to the upper triangle of the matrix, including the diagonal, which consists of 6 entries. Therefore, there are $2^6$ reflexive and symmetric relations.
        
        For (d), the equivalence relations correspond to the partitions of the set. The 4th \href{https://math.libretexts.org/Bookshelves/Combinatorics_and_Discrete_Mathematics/Combinatorics_and_Graph_Theory_(Guichard)/01%3A_Fundamentals/1.05%3A_Bell_Numbers}{Bell Number}, $B_4$, which represents the number of partitions of a set of 4 elements into non-empty subsets, is 15. Hence, there are 15 distinct equivalence relations on the set $X$.
        
        For (e), generalizing to a set of size $n$, the answers would be $2^{(n^2)}$ for the number of relations, $2^{n(n-1)}$ for the number of reflexive relations, and $2^{n(n-1)/2}$ for the number of reflexive and symmetric relations. These results can be deduced by extension and verified via mathematical induction.
        \end{solution}

    \section{Combination and Permutation with applications}
    In this section, we will introduce more powerful tools for counting, which
    can be taken as the further abstraction to the basic counting principals we discussed
    earlier. With these notions, we can further categorize counting problems and find
    patterns to solve them.
        \subsection{Permutation}
        We first introduce Permutation, which focuses on finding ways of arrangement
        for selection with order. Consider that the string $abc$. How many ways can we 
        arrange them? But listing all the possibilities: $abc, acb, bac, bca, cab,
        ,cba$ we can tell that the answer is 6. For each of these results, we call it 
        a Permutation for these letters.

        Now we think about a more generalized case, where we have $n$ letters, where 
        each letter is distinguishable, even though they are the same latter. Such as 
        for $a_1$ and $a_2$ we have two permutations, $a_1a_2$ and $a_2a_1$.
    
        We can actually apply this by product rule. Since for the first letter, we 
        are choosing it from $n$ letters, giving $n$ choices, and the second one gives
        $n-1$ choices, so and and so forth, until we put the last remaining letter into
        the string. We have 
        $$n(n-1)(n-1)\dots 3\dots 2 \dots 1$$
        which is also called $n$ factorial or full permutation.
        \begin{definition}[Full Permutation]\label{FP}
            Suppose now that we have $n$ objects. We have that there are $$n\cdot (n-1)\dots \cdot2 \cdot 1 = n!$$
            possible permutations.
        \end{definition}

        \begin{notation}[Factorial($!$)]
            The factorial of a non-negative integer \( n \), denoted by \( n! \), is the product of all positive integers less than or equal to \( n \). It is defined as:

            $$
            n! = n \times (n-1) \times (n-2) \times \cdots \times 2 \times 1
            $$

            The factorial function grows very rapidly with the increase of \( n \). It is used prominently in permutations and combinations, as well as in the calculation of probabilities and various mathematical series.
            
            Additionally, by convention, the factorial of zero is defined as \( 0! = 1 \).
            There will be an exercise on this.
        \end{notation}

        We can combine the counting method for permutation with basic counting principals.
        Here is an example.
        \begin{example}
        A class in probability theory consists of 6 men and 4 women. An examination is
        given, and the students are ranked according to their performance. Assume that no
        two students obtain the same score. How many ways of ranking are possible?
        If the ranking are separated among boys and girls, how many ways of ranking are
        there?
        \begin{solution}
            First, we need to tell which kind of arrangement is involved. Obviously,
            ranking is ordered.
            So for the first case, we have $(6+4)! = 3628800$ cases.
            In the second case however, boys and girls are ranked separately. So we 
            either rank girls first or rank boys first. We have $6!4! = 720\times 64 =17280$.
        \end{solution}
        \begin{remark}
            This example also shows that \(\forall a,b\in \Z^+, (a+b)! \geq a!b!\).
        \end{remark}
        \end{example}
        

        Let's try out a different example.
        \begin{example}
            How many different letter arrangements can be formed from the letters \textbf{PEPPER}?
        \begin{solution}
            We first note that there are $6!$ permutations of the letters $P_1E_1P_2P_3E_2R$ when the 3P’s and the 2E’s are distinguished from one another. However, consider any one of these permutations, for instance, $P_1P_2E_1P_3E_2R$. If we now permute the P’s among themselves and the E’s among themselves, then the resultant arrangement would still be of the form PPEPER. That is, all 3! 2! permutations.$$\begin{array}{ll}P_{1} P_{2} E_{1} P_{3} E_{2} R & P_{1} P_{2} E_{2} P_{3} E_{1} R \\P_{1} P_{3} E_{1} P_{2} E_{2} R & P_{1} P_{3} E_{2} P_{2} E_{1} R \\P_{2} P_{1} E_{1} P_{3} E_{2} R & P_{2} P_{1} E_{2} P_{3} E_{1} R \\P_{2} P_{3} E_{1} P_{1} E_{2} R & P_{2} P_{3} E_{2} P_{1} E_{1} R \\P_{3} P_{1} E_{1} P_{2} E_{2} R & P_{3} P_{1} E_{2} P_{2} E_{1} R \\P_{3} P_{2} E_{1} P_{1} E_{2} R & P_{3} P_{2} E_{2} P_{1} E_{1} R\end{array}$$
            Since we know, the full permutation case where all letters are distinguished is interpreted by $6!$ which is a full permutation. Now what we will do is excluding the cases where confusion could be caused because of repeated letters using division Principal. Therefore the answer is $\frac{6!}{3!2!} = 60$, which means excluding all the cases with the same answer attributed to the repetition. 
        \end{solution}
        \end{example}
        In this example, we combined Permutation counting with division rule.
        We call this kind of problems "Permutations with Repetition".

        \begin{definition}[Permutations with Repetition] \label{PR}
            For the permutation problem with $n$ items, among which $n_1$, $n_2$, until
            $n_k$ are number of repetition within each item. The total number of 
            permutation when not distinguishing repetition is
            $$ \frac{n!}{n_1! \cdot n_2! \cdot \ldots \cdot n_k!}.$$
         \end{definition}

         Now we consider another example to introduce the specific permutation of 
         a certain amount of element from a complete entity.

         \begin{example}
            Suppose we have 1, 2, 3, 4, four digits to generate any possible three-digit 
            numbers, how many such numbers could be created (we will not remove any number
            after selection)?
            \begin{solution}
                Since all numbers can be used multiple times, we have 3 choices among 4 numbers,
                giving us \(4\times 4 \times 4 = 64\) choices by product rule.
            \end{solution}
         \end{example}
         Now we change the scenario by removing the chosen number after each selection.
         \begin{example} \label{numberselect}
            Suppose we have 1, 2, 3, 4, four digits to generate any possible three-digit 
            numbers, how many such numbers could be created (we will remove any number
            after selection)?
        \begin{solution}
            We first focus on choosing the number. Since now the number will not be replaced,
            we have \(4\times 3 \times 2 = 24\) ways to choose the number, where each number has 
            different sequence for the digits.
        \end{solution}
        \end{example}
        We see that the pattern in the second example is completely different from the first example by 
        just changing one condition. This kind of irreplaceable permutation are categorized
        to $r$-Permutation.
        \begin{theorem}[$r$-Permutation]
            If $n$ is a positive integer and $r$ is an integer with $1\leq r\leq n$, then there are
            $$
            P(n,r)=n(n-1)(n-2)\cdots(n-r+1)
            $$
            $r$-permutations of a set with $n$ distinct elements.
            Note that another common notation for this is $^n P_r$.
        \end{theorem}
        
        This could be proven by basic counting principals, leaving as an exercise.

        But this open form is quite lengthy, can we write it in a closed form? Of course yes,
        because may already realize that the form of the expression is pretty similar to 
        factorial. But the domain of the factorial function is $\N_0$(natural number greater
        or equal to 0), while $r\geq 1$ as mentioned in the theorem. By the definition of 
        permutation, we know that $P(n,0)$ must evaluate to 1, for a similar reason to $0!=1$. By the division 
        rule, we can get that $\frac{n!}{n!}=1$, which means we are not choosing anything from
        the entity. Now, if we introduce the variable $r\in[0,n]$ to the last expression, we get
        the closed form: $$P(n,r) = \frac{n!}{(n-r)!}$$.

        \begin{corollary}
            If $n$ and $r$ are integers with $0\leq r\leq n$, then $P(n,r)=\frac{n!}{(n-r)!}.$
        \end{corollary}
        The explanation above are more about reasoning, while this corollary can also be obtained by 
        algebra analysis to $P(n,r)=n(n-1)(n-2)\cdots(n-r+1)$, since this can be taken as the quotient 
        of some $n$ factorial divided by $n-r$ factorial.
        
        This is exactly what we have been using in example \ref{numberselect}.
        \subsection{Combination}
        Now we consider some other scenario of counting.
        \begin{example}
        how many possible combinations
        could be obtained by selecting 3 letters out of $a,b,c,d,e$ (non-replaceable), where the combination is not ordered,
        meaning that $ab\equiv ba$, both together count for 1 single case.
        \end{example}
        \begin{solution}
            We know that we have 5 choices for the first letter and 4 choices for the second letter, 3 for the last one.
            so we have $5\times 4\times 3 = 60$. However, this includes some equivalent combinations,
            which we need to rule out. 

            We know that each result is a string of length 3, so we know that every 3 result will be 
            a set of equivalent string, which will be only counted once. To exclude them, we need to 
            divide all result of selections with the full permutation of any possible string length 3,
            which is $3!$. So we have $\frac{5\times 4 \times 3}{3\times 2 \times 1} = 10$ cases. 
        \end{solution}
        This result is quite obvious, however, if you examine further, $5\times 4 \times 3 = P(5,3)$.
        So we can write it as $\frac{P(5,3)}{3!}$. We can use the same letter $n,r$ to denote this relation
        as $$\frac{P(n,r)}{r!} = \frac{n!}{(n-r)!r!}.$$
        We call this $r$-combination of $n$.
        \begin{theorem}[$r$-combination]\label{rcombi}
            The number of $r$-combinations of a group of object with $n$ distinct elements is denoted
            by $C(n,r)$ or $\binom{n}{r}$, and is called a binomial coefficient.
            We define $\binom{n}{r}$,for $r\leq n$, by
            $$\binom{n}{r} = \frac{n!}{(n-r)!r!}$$
            and say that $\binom{n}{r}$ (read as “$n$ choose $r$”) represents the number of possible combinations of $n$ objects taken $r$ at a time.
        \end{theorem}
        Here is an example  for your better understanding of this.
        \begin{example}
            From a group of 5 women and 7 men, how many different committees consisting of 2 women and 3 men can be formed? What if 2 of the men are feuding and refuse to serve on the committee together?
            \end{example}
            
            \begin{solution}
            As there are \( \binom{5}{2} \) possible groups of 2 women, and \( \binom{7}{3} \) possible groups of 3 men, it follows from the basic principle that there are 
            \[ \binom{5}{2} \times \binom{7}{3} = \frac{5 \cdot 4}{2 \cdot 1} \times \frac{7 \cdot 6 \cdot 5}{3 \cdot 2 \cdot 1} = 350 \]
            possible committees consisting of 2 women and 3 men.
            
            Now suppose that 2 of the men refuse to serve together. Because a total of \( \binom{7}{3} = 35 \) possible groups of 3 men contain both of the feuding men, it follows that there are \( 35 - \binom{2}{2} \times \binom{5}{1} = 30 \) groups that do not contain both of the feuding men. Because there are still \( \binom{5}{2} = 10 \) ways to choose the 2 women, there are \( 30 \times 10 = 300 \) possible committees in this case.
        \end{solution}
        Do keep in mind that even with combination and permutation methods, the basic principles of counting are still essential for problem-solving.

        Here's another important fact about binomial number.
        \begin{corollary}
            Let \( n \) and \( r \) be nonnegative integers with \( r \leq n \). Then \( C(n, r) = C(n, n - r) \).
        \end{corollary}
        \begin{proof}
            From Theorem \ref{rcombi} it follows that
            \[ C(n, r) = \frac{n!}{r!(n - r)!} \]
            and
            \[ C(n, n - r) = \frac{n!}{(n - r)![n - (n - r)]!} = \frac{n!}{(n - r)!r!}. \]
            Hence, \( C(n, r) = C(n, n - r) \).
            \end{proof}
        We also provide another combinatorial proof.
        \begin{proof}
        By definition, the number of subsets of S with $r$ elements equals $C(n,r)$. But each subset A of S is also determined by specifying which elements are not in $A$, and so are in $A$. Because the complement of a subset of $S$ with $r$ elements has $n-r$ elements, there are also $C(n,n-r)$ subsets of S with $r$ 
        elements. It follows that $C(n,r)=C(n,n-r).$
        \end{proof}
        Another interesting result is about decomposition of  combination number.
        \begin{example}
            Suppose you are sent to buy 6 bananas. The store has 20 bananas altogether: 19
            good ones and 1 bad one. Any selection of 6 either avoids the bad one or includes it.
            So the total number of selections equals the number containing only good bananas
            plus the number that contain the bad one and 5 good ones. That is,
            $$\begin{aligned}
                \binom{20}{6}& =\binom{19}6+\binom{19}5=\frac{19!}{6!\times13!}+\frac{19!}{5!\times14!} \\
                &=\frac{19\times18\times17\times16\times15\times14}{6\times5\times4\times3\times2\times1}+\frac{19\times18\times17\times16\times15}{5\times4\times3\times2\times1} \\
                &=19\times17\times2\times3\times14+19\times18\times17\times2 \\
                &=27 132+11 628=38 760.
            \end{aligned}$$
        \end{example}

        This bring us to the following conclusion.
        \begin{corollary}\label{pascal's identity}
            This result applies in general, if $0<k<n$, then
            $$\binom{n}{k} = \binom{n-1}{k-1} + \binom{n-1}{k}$$
        \end{corollary}
        \begin{proof}
            $$
                \begin{aligned}
                &\begin{pmatrix}n-1\\k\end{pmatrix}+\begin{pmatrix}n-1\\k-1\end{pmatrix}=\frac{(n-1)!}{k!\times[(n-1)-k]!}+\frac{(n-1)!}{(k-1)!\times[(n-1)-(k-1)]!} \\
                &=\frac{(n-1)!}{k!\times[n-k-1]!}+\frac{(n-1)!}{(k-1)!\times[n-k]!}\\
                &=\frac{(n-1)!}{k!\times(n-k-1)!}\times\frac{(n-k)}{(n-k)}+\frac{k}{k}\times\frac{(n-1)!}{(k-1)!\times(n-k)!}\quad\\
                &=\frac{[(n-k)+k]\times(n-1)!}{k!\:\times\:(n-k)!}=\frac{n\times(n-1)!}{k!\times(n-k)!}=\frac{n!}{k!\:\times\:(n-k)!}=\left(\begin{array}{c}n\\k\end{array}\right).
                \end{aligned}
            $$
        \end{proof}
        You may have realized that this is a recursive relation. We will discuss more on this topic later.
        \begin{remark}
            This identity is called  
            \href{https://artofproblemsolving.com/wiki/index.php/Pascal%27s_Identity#:~:text=Pascal's%20Identity%20is%20a%20useful,Formula%2C%20and%20occasionally%20Pascal's%20Theorem.}{Pascal's Identity}.
            You may find an interesting combinatorial proof in the link.
        \end{remark}

        \subsection{Further Interpretation of Counting with Set Theory}
        Now let's wrap up what we have covered in this section. We have gone through combination and permutations, and have seen many examples. However, we haven't reached
        the nature of these counting method. Fundamentally, all counting problems are set problems. Recall how the four principals of accounting are defined in the last section. Without
        conclusions and concepts in naive set theory, none of them will exist. 

        We have also seen the intricate relation between fundamental counting principals and permutation, as well as combination. Actually, set theory is one of the cornerstone of counting
        methods. For every problem we have solved so far, we are actually manipulating a set or multiple sets, and their members. This is because set or class is the abstraction of any
        existent objects that share some common property.

        The way we distinguish different counting problems, or method we are going to use is basically by finding two properties of the problem.
        \begin{itemize}
            \item Whether it is a permutation or combination problem?
            \item Can each object be selected repetitively? 
        \end{itemize}

        Now let's recap the four cases of counting and relate them to higher abstraction in sets.
        
        \subsubsection*{$k$-Sequences on an $n$-Set}
        
        \begin{definition}[$k$-Sequences on an $n$-Set]
            When the codomain of a sequence S is the set $C$, we say that S is a sequence on C If both $k$ and $n$ are positive integers, then a k-sequence on an an-set is a 
            function S from $\{1..k\}$ into some set $X=\{x_1,x_2,\ldots,x_n\}$ with exactly $n$ elements, and we may write S as
            $$S=(s_1,s_2,s_3,\ldots,s_k) \text{ where each } s_j\in X.$$
        \end{definition} 
        For $r$-permutation that allow repetition, we can take it as the number of $k$-Sequences on an $n$-Set. This means that we are choosing $k$
        members from set $n$, and rearrange them to any possible sequence. Since we know that in a sequence, the same object that appears multiple times are distinguishable.
        So the total number of outcomes is $n^k$.

        For example, there are $4^3$ 3-sequence on $\{1,2,3,4\}$.

        For $r$-permutation that does not allow repetition, meaning that each element can only be chosen once. In this case we are trying to get a sequence of size $r$ where
        each member is unique and is from $C$. This can be perfectly fitted into the definition of $P(n,r)$.
        This is equivalent to "truncate" the full permutation ($(n-k)\times \dots \times 1$), so we have 
        $$n\times(n-1)\times \dots \times(n-k+1).$$

        For example, The number of 4-permutations on a 6-set is $$6\times 5 \times 4 \times 3=360.$$
        We can actually also write the number of 6-permutations on 4-set, which is 
        $$4 \times 3\times 2\times 1 \times 0 \times (-1)=0.$$
        Obviously it does not exist.

        We have learned that the number of subset of a $n$-set is $2^n$. This is actually a corollary fundamental counting Principal. Because for any set with $n$ member (we call it $S$),
        we can define a characteristic sequence $X$(we discussed in set theory, chapter2), and the cardinality of the characteristic sequence must equal to $n$. Now considering
        the subsets. Each possible characteristic sequence map to a unique subset of the original set, and each position of $X$ can only be either 0 or 1, so $S$ have $2^n$ 
        characteristic sequence, i.e., $S$ has $2^n$ subsets.
        
        \subsubsection*{Number of $k$-Subsets of an $n$-Set}
        Now we consider number of $k$-subsets of an $n$-set. Since a set has no sequence and is not repetitive 
        element, so we know that the number of result for non-repetitive $k$-Subsets of an $n$-Set is 
        exactly $\binom{n}{r}$.

        But how can we understand combination with repetition, also known as Multiset combination?
        Multiset combinations refer to combinations where repetition of elements is allowed. Unlike 
        sets, where each element is unique, a multiset can contain multiple occurrences of the same 
        element. Mathematically, we denote the number of $k$-combinations from a set with $n$ elements 
        with repetition allowed as \( \binom{n + k - 1}{k} \).
        \begin{definition}[$k$-Subsets of an $n$-MultiSet]
            Given a set \( X = \{x_1, x_2, \ldots, x_n\} \), a $k$-combination with repetition allowed from $X$ 
            is a selection of $k$ elements from X where each element can appear multiple times. The total number of such combinations is given by:
            $$ \binom{n + k - 1}{k} = \frac{(n + k - 1)!}{k!(n - 1)!} $$
        \end{definition}
        \begin{proof}
            We model the problem of selecting $k$ elements from the multiset $X$ using the stars and bars method. In this method, we represent each selection by a star (*) and use bars (|) to separate the different types of elements in the multiset.
            
            For $k$ selections and $n$ types of elements, we need $k$ stars and $n-1$ bars. The bars are used to partition the $k$ stars into $n$ distinct groups, where each group corresponds to one type of element from the multiset $X$.
            
            The total number of symbols (stars and bars together) is $n + k - 1$. To find the number of ways to arrange these symbols, we need to choose $k$ positions for the stars out of the $n + k - 1$ available positions, leaving the remaining positions for the bars.
            
            This is equivalent to choosing $k$ elements from a set of $n + k - 1$ elements, which is given by the binomial coefficient:
            \[
            \binom{n+k-1}{k} = \frac{(n+k-1)!}{k!(n-1)!}
            \]
            Thus, the number of $k$-subsets of an $n$-multiset, where repetition is allowed, is precisely the number of ways to arrange $k$ stars and $n-1$ bars, confirming the formula.
        \end{proof}
        Here are some examples.
        \begin{example}
            Consider a set of fruits \( F = \{ \text{apple}, \text{banana}, \text{cherry} \} \). If we want to select 2 fruits with repetition allowed, the possible combinations are:
        \begin{itemize}
        \item Two apples.
        \item One apple and one banana.
        \item One apple and one cherry.
        \item Two bananas.
        \item One banana and one cherry.
        \item Two cherries.
        \end{itemize}
        The number of combinations with repetition is \( \binom{3 + 2 - 1}{2} = \binom{4}{2} = 6 \).
        \end{example}

        \begin{example}
            For choosing 3 balls from a set of balls with colors red (R), blue (B), and green (G), we have the following multiset combinations:
            \begin{itemize}
              \item RRR, RRB, RRG, RBB, RBG, RGG
              \item BBB, BBG, BGG, GGG
              \item RRR, BBB, GGG (repetitions of the same color)
            \end{itemize}
            By the formula, the number of combinations with repetition is \( \binom{3 + 3 - 1}{3} = \binom{5}{3} = 10 \).
        \end{example}
        Here is a brief wrap up for distinguishing these problems.
        \begin{itemize}
            \item \textbf{$k$-subset of an \( n \)-set}: In this scenario, the set consists of \( n \) distinct elements, and we want to choose \( k \) of them. No element can be chosen more than once because sets do not allow for repetition. The order of selection does not matter, and the total number of \( k \)-subsets is given by the binomial coefficient \( \binom{n}{k} \).
            \item \textbf{$k$-subset of an \( n \)-multiset}: In contrast, a multiset can have repeated elements, so when we choose \( k \) elements from an \( n \)-multiset, we are allowed to select the same element multiple times. This greatly increases the number of possible combinations since each of the \( k \) slots can be filled with any of the \( n \) elements, with repetitions. The total number of such combinations is given by \( \binom{n+k-1}{k} \), which accounts for the possibility of repetition.
        \end{itemize}
        \begin{example}
            Consider a set \( S \) of 5 distinct books. If we want to select 3 books to place on a shelf, we use combinations without repetition. The total number of ways to do this is given by:
            \[ \binom{5}{3} = \frac{5!}{3!(5-3)!} = 10. \]
            Now, consider a multiset \( M \) of 5 types of fruits with an unlimited quantity of each type. If we want to select a basket of 3 fruits, where we can select the same type more than once, we use combinations with repetition. The total number of ways to do this is given by:
            \[ \binom{5+3-1}{3} = \binom{7}{3} = \frac{7!}{3!(7-3)!} = 35. \]
            When counting selections from a set, we use combinations without repetition because each element can be chosen only once. In contrast, when counting selections from a multiset, we use combinations with repetition since each element can appear multiple times in a selection.
        \end{example}
        
        \subsection{Multinomial Theorem and Bell Number}
        \subsubsection*{Binomial Theorem}
        In previous section, we introduced corollary ref{pascal's identity}. This conclusion is the foundation
        of binomial theorem, which is why we call $\binom{n}{r}$ binomial coefficient. We have learned in the
        middle school the basic algebra knowledge that 
        \begin{equation}
            (a\pm b)^2 = a^2 \pm 2ab + b^2 
        \end{equation}
        Though we can prove it by using basic algebra, but it does not really matter here. This conclusion
        is only a subconclusion of its further generelization, and we call it Binomial Theorem.
        \begin{theorem}[Binomial Theorem]\label{BT}
            All binomials with $x\in \mathbb{R}\space \text{and}\space y\in \mathbb{R}$ with $n \in 
            \mathbb{Z}$ follow: $$(x+y)^{n}=\sum_{k=0}^{n}\left(\begin{array}{l}n \\k\end{array}\right) x^{k} y^{n-k}$$
        \end{theorem}
        This theorem could be proven easily by induction with corollary \ref{pascal's identity} as lemma.
        \begin{proof}
            For the base case of $n = 1$, $(x+y)^1 = \binom{1}{0} x^0y^1 + \binom{1}{1}x^1y^0 = x+y$
            With this suppose when $n = n- 1$, by theorem \ref{BT}:
            $$(x+y)^{n-1} = \sum_{k=0}^{n-1}\left(\begin{array}{c}n-1 \\k\end{array}\right) x^{k} y^{n-1-k}$$ While $$(x+y)^n = (x+y)(x+y)^{n-1} = (x+y)\sum_{k=0}^{n-1}\left(\begin{array}{c}n-1 \\k\end{array}\right) x^{k} y^{n-1-k}$$$$= \sum_{k=0}^{n-1}\left(\begin{array}{c}n-1 \\k\end{array}\right) x^{k+1} y^{n-1-k} + \sum_{k=0}^{n-1}\left(\begin{array}{c}n-1 \\k\end{array}\right) x^{k} y^{n-k} \space \text{(Distribution Law)}$$
            Let $i = k+1$ in the first sum and $i=k$ in the second sum:
            
            $$\begin{aligned}(x+y)^{n} & =\sum_{i=1}^{n}\left(\begin{array}{c}n-1 \\i-1\end{array}\right) x^{i} y^{n-i}+\sum_{i=0}^{n-1}\left(\begin{array}{c}n-1 \\i\end{array}\right) x^{i} y^{n-i} \\& =x^{n}+\sum_{i=1}^{n-1}\left[\left(\begin{array}{c}n-1 \\i-1\end{array}\right)+\left(\begin{array}{c}n-1 \\i\end{array}\right)\right] x^{i} y^{n-i}+y^{n} \\& =x^{n}+\sum_{i=1}^{n-1}\left(\begin{array}{c}n \\i\end{array}\right) x^{i} y^{n-i}+y^{n} \\& =\sum_{i=0}^{n}\left(\begin{array}{c}n \\i\end{array}\right) x^{i} y^{n-i}\end{aligned}$$
            Thus the theorem\ref{BT} is proved.
        \end{proof}
        But actually we can get a more concise and elegant combinatorial proof, you may check 
        \href{https://artofproblemsolving.com/wiki/index.php/Binomial_Theorem}{here}.

        \begin{example}[Relation between coefficients]
            The binomial theorem states that for any positive integer $n$, the expansion of $(a+b)^n$ is given by:
            \[
            (a + b)^n = \sum_{k=0}^{n} \binom{n}{k} a^{n-k} b^k
            \]
            where $\binom{n}{k}$ are the binomial coefficients.
            \begin{remark}
                Why this looks different from the theorem? Think about it. Is it really a different expression?
                What if we are just interchange the notation for each number? Isn't it the same?
            \end{remark}
            For $n=3$:
            \[
            (a + b)^3 = \binom{3}{0}a^{3}b^{0} + \binom{3}{1}a^{2}b^{1} + \binom{3}{2}a^{1}b^{2} + \binom{3}{3}a^{0}b^{3}
            \]
            \[
            = a^{3} + 3a^{2}b + 3ab^{2} + b^{3}
            \]
            
            For $n=4$:
            \[
            (a + b)^4 = \binom{4}{0}a^{4}b^{0} + \binom{4}{1}a^{3}b^{1} + \binom{4}{2}a^{2}b^{2} + \binom{4}{3}a^{1}b^{3} + \binom{4}{4}a^{0}b^{4}
            \]
            \[
            = a^{4} + 4a^{3}b + 6a^{2}b^{2} + 4ab^{3} + b^{4}
            \]
            
            For $n=5$:
            \[
            (a + b)^5 = \binom{5}{0}a^{5}b^{0} + \binom{5}{1}a^{4}b^{1} + \binom{5}{2}a^{3}b^{2} + \binom{5}{3}a^{2}b^{3} + \binom{5}{4}a^{1}b^{4} + \binom{5}{5}a^{0}b^{5}
            \]
            \[
            = a^{5} + 5a^{4}b + 10a^{3}b^{2} + 10a^{2}b^{3} + 5ab^{4} + b^{5}
            \]
            
            The coefficients in the expansion follow a pattern known as Pascal's triangle. Each coefficient is the sum of the two coefficients above it in the previous expansion. For instance, the coefficient of $a^{3}b^{2}$ in the expansion of $(a+b)^5$ is 10, which is the sum of the coefficients of $a^{4}b^{1}$ and $a^{3}b^{2}$ from the expansion of $(a+b)^4$, which are 4 and 6, respectively.
            You may see more \href{https://brilliant.org/wiki/pascals-triangle/}{here}.
            \end{example}
        
        In the last section, we used combinatorial proof to explain why the number of subsets for a $n$-set
        is $2^n$. Now we can get one more way to explain it by Binomial Theorem.
        \begin{proof}
            Since there are \(\binom{n}{k}\) subsets of size $k$, So by theorem \ref{BT}
            $$\sum_{k=0}^{n}\binom{n}{k}=(1+1)^n = 2^n.$$
        \end{proof}

        \subsubsection*{Multinomial Theorem}
        The name of this chapter have told you that our discussion on the power of sum of numbers does not 
        end here. Mathematicians seek to generalize every problem, so as computer scientists and programmers. 
        Now suppose we want to find the pattern of result of some expression involving more than 3 numbers 
        or variables $(a+b+c)^n$, how can we get the expansion?

        Before we do that, let's considering such scenario. 
        \begin{example}[Counting Problem]
            How many ways can you arrange the letters in the word "SUCCESS"?
            Since the word "SUCCESS" has 7 letters with 1 "S", 1 "U", 2 "C", and 3 "S", the number of arrangements is given by the multinomial coefficient:
            \[
            \binom{7}{1,1,2,3} = \frac{7!}{1! \cdot 1! \cdot 2! \cdot 3!} = 420.
            \]
        \end{example}

        \begin{example}
            Consider a set of $n$ distinct items to be divided into $r$ distinct groups of respective sizes $n_1, n_2, \ldots, n_r$, where $\sum_{i=1}^{r} n_i = n$. The number of ways to perform this division is given by the multinomial coefficient:
            \[
            \binom{n}{n_1, n_2, \ldots, n_r} = \frac{n!}{n_1! \cdot n_2! \cdot \ldots \cdot n_r!}
            \]
            This is derived from the principle of counting, starting with $\binom{n}{n_1}$ ways to choose the first group, then $\binom{n - n_1}{n_2}$ ways for the second, and so on, leading to the product of binomial coefficients which simplifies to the formula above due to the factorial terms canceling out. Each division corresponds to a unique permutation of the items into the groups, considering items within the same group as indistinguishable.
        \end{example}
        We have covered similar problems earlier as permutation without repetition. Here we introduce a new
        notation for this.
        \begin{notation}[Multinomial Coefficient]
            If $n_1 + n_2 + \dots + n_r = n$, we define $\binom{n}{n_1, n_2, \ldots, n_r}$ by
            \[
            \binom{n}{n_1, n_2, \ldots, n_r} = \frac{n!}{n_1! \cdot n_2! \cdot \ldots \cdot n_r!}.
            \]
            Thus, $\binom{n}{n_1, n_2, \ldots, n_r}$ represents the number of possible divisions of $n$ distinct objects into $r$ distinct groups of respective sizes $n_1, n_2, \ldots, n_r$.
        \end{notation}
        We call this Multinomial Coefficient. This allows us to generalize Multinomial Theorem.

        \begin{definition}[Multinomial Theorem]
            The multinomial theorem extends the binomial theorem to polynomials with any number of terms. For any positive integer $n$ and non-negative integers $n_1, n_2, \ldots, n_k$ such that $n_1 + n_2 + \cdots + n_k = n$, the theorem states that:
            \[
            (a_1 + a_2 + \cdots + a_k)^n = \sum \binom{n}{n_1, n_2, \ldots, n_k} \cdot a_1^{n_1} \cdot a_2^{n_2} \cdots a_k^{n_k},
            \]
        \end{definition}
        We only offer the combinatorial proof here, since the induction proof could be made easily by binomial
        theorem. That will be one of the exercises.
        \begin{proof}
            The multinomial coefficient $\binom{n}{n_1, n_2, \ldots, n_k}$ counts the number of ways to partition a set of $n$ distinct items into $k$ bins with $n_i$ items in the $i$-th bin. This corresponds to the number of distinct sequences that can be formed by permuting the $n$ items where there are $n_i$ of the $i$-th type.

            When we expand $(x_1 + x_2 + \cdots + x_k)^n$ by distributing and multiplying out all terms, each term in the expansion corresponds to choosing one of the $x_i$'s from each of the $n$ factors. The coefficient of a given term $x_1^{n_1} x_2^{n_2} \cdots x_k^{n_k}$ in the expanded product corresponds to the number of sequences of these choices, which is precisely the multinomial coefficient.

            Hence, the combinatorial interpretation of the multinomial coefficients directly provides a proof of the multinomial theorem.

        \end{proof}    
        The multinomial theorem is related to permutations with repetition. Permutations with repetition occur when we want to count the number of different sequences that can be formed with a set of $n$ elements where each element can appear multiple times. The number of such permutations is given by the multinomial coefficient. This is because each term in the expansion represents a unique way to permute the $n$ objects into $k$ distinct groups with $n_1, n_2, \ldots, n_k$ objects in each group, with the condition that some objects may be identical to one another.
        
        \begin{example}
            Expanding $(a + b + c)^4$ using the multinomial theorem gives:
            \[
            (a + b + c)^4 = \binom{4}{4,0,0}a^4 + \binom{4}{3,1,0}a^3b + \binom{4}{3,0,1}a^3c + \binom{4}{2,2,0}a^2b^2 + \ldots + \binom{4}{0,0,4}c^4
            \]
            which simplifies to:
            $
            a^4 + 4a^3b + 4a^3c + 6a^2b^2 + 6a^2bc + 6a^2c^2 + 4ab^3 + 12ab^2c + 12abc^2 + 4ac^3 + b^4 + 4b^3c + 6b^2c^2 + 4bc^3 + c^4.
            $
        \end{example}
            


        
        \subsection{Exercises}
        



        \begin{exercise}
            We mentioned that $0!=1$ is defined purposely. Why it cannot be 0?
            Justify or refute it in any way you can work out. 
        \end{exercise}
        \begin{solution}
            Here are some possible explanations.
            \begin{itemize}
                \item Since factorial $n$ represents the way of ordered arrangement
                for $n$ objects, for 0 objects, we only have one way of arranging.
                \item $n!=n(n-1)!$, so we need to make sure $1 = 1(0)!$ exists, and
                therefore we  $0!=1$
            \end{itemize}
        \end{solution}
        \begin{exercise}
            Define a function \( f: \mathbb{N}_0 \rightarrow \mathbb{N}_0 \) by the following recursive relation:
            \[
            f(n) =
            \begin{cases} 
            1 & \text{if } n = 0, \\
            n \cdot f(f(n-1)) & \text{if } n > 0.
            \end{cases}
            \]
            \begin{enumerate}
                \item Prove or disprove: The function \( f(n) \) is always equal to \( n! \).
                \item If \( f(n) \) does not always equal \( n! \), find an explicit expression for \( f(n) \) and provide examples that demonstrate how \( f(n) \) deviates from \( n! \).
            \end{enumerate}
            \textbf{Hint}: Compare this function with the strictly defined factorial
            recursive function.
        \end{exercise}
        
        \begin{exercise}
            Prove that If $n$ is a positive integer and $r$ is an integer with $1\leq r\leq n$, then there are
            $$
            P(n,r)=n(n-1)(n-2)\cdots(n-r+1).
            $$
        \end{exercise}
        \begin{proof}
            We will use the product rule to prove that this formula is correct. The first element of the permutation can be chosen in $n$ ways because there are $n$ elements in the set. There are $n-1$ ways to choose the second element of the permutation, because there are $n-1$ elements left in the set after using the element picked for the first position. Similarly, there are $n-2$ ways to choose the third element, and so on, until there are exactly $n-(r-1)=n-r+1$ ways to choose the $r$th element. Consequently, by the product rule, there are
            $$
            n(n-1)(n-2)\cdots(n-r+1)
            $$
            $r$-permutations of the set.
        \end{proof}

        \begin{exercise}
            How many letter arrangements can be made from the letters
            \begin{enumerate}[label=(\alph*)]
            \item Fluke?
            \item Propose?
            \item Mississippi?
            \item Arrange?
            \end{enumerate}
        \end{exercise}

        \begin{solution}
            We can find the number of different arrangements of the letters by considering the factorials of the total number of letters divided by the factorials of the number of repeated letters.
            
            \begin{enumerate}[label=(\alph*)]
            \item For the word \emph{Fluke}, there are no repeating letters. So, the number of different arrangements is simply \(5!\):
            \[ 5! = 5 \times 4 \times 3 \times 2 \times 1 = 120. \]
            
            \item For the word \emph{Propose}, the letter `P' is repeated twice and the rest are distinct. So, the number of arrangements is:
            \[ \frac{7!}{2!} = \frac{7 \times 6 \times 5 \times 4 \times 3 \times 2 \times 1}{2 \times 1} = 2520. \]
            
            \item In the word \emph{Mississippi}, we have `S' repeated four times, `I' repeated four times, and `P' repeated twice. The total number of arrangements is:
            \[ \frac{11!}{4!4!2!} = \frac{11 \times 10 \times 9 \times 8 \times 7 \times 6 \times 5 \times 4 \times 3 \times 2 \times 1}{(4 \times 3 \times 2 \times 1)(4 \times 3 \times 2 \times 1)(2 \times 1)} = 34650. \]
            
            \item For the word \emph{Arrange}, the letter `A' is repeated twice, and the letter `R' is repeated twice. The number of different arrangements is:
            \[ \frac{7!}{2!2!} = \frac{7 \times 6 \times 5 \times 4 \times 3 \times 2 \times 1}{(2 \times 1)(2 \times 1)} = 1260. \]
            \end{enumerate}
            In each of these cases, we use the formula for permutations of n items with repetition, \(\frac{n!}{n_1! \times n_2! \times \ldots \times n_k!}\), where \(n_i\) is the number of times the ith element is repeated.
        \end{solution}

        \begin{exercise}
            \begin{enumerate}
                \item How many ways can a president, treasurer, and secretary be chosen from a group of 10 people?
                \item How many ways can a team of three people be chosen from a group of 10 people?
                \item What's the essential difference between (a) and (b)? Which answer is larger? Could you have known this without doing any calculation?
                \item How many ways can a bowl of three scoops of ice-cream be selected from 10 flavours? (Multiple scoops of the same flavour are allowed.)
                \item How many ways can five different prizes be divided among Anastasia, Becky, and Cadel? (Not everyone has to get a prize.)
                \item In how many different orders can six horses finish a race? (Assume there are no ties and they all do finish.)
            \end{enumerate}
        \end{exercise}
        \begin{solution}
            For question (a), since the roles are distinct and order matters, we use permutations. The number of ways is given by \( P(10, 3) \).
            \[ P(10, 3) = \frac{10!}{(10-3)!} = 10 \times 9 \times 8 = 720. \]

            For question (b), as order does not matter, we use combinations. The number of ways is given by \( \binom{10}{3} \).

         \[ \binom{10}{3} = \frac{10!}{3!7!} = \frac{10 \times 9 \times 8}{3 \times 2 \times 1} = 120. \]

         For question (c), the essential difference lies in the consideration of order. (a) uses permutations and is thus larger. Without calculations, we could deduce this due to the nature of permutations yielding more outcomes than combinations when order is taken into account.

         For question (d), concerning the selection of ice-cream scoops, we consider two cases:

        \textbf{Case 1: Order of scoops matters.} Each of the three scoops can be one of 10 flavours, and the order in which the flavours are chosen matters. In this case, each scoop is distinct, and the number of ways to select the ice-cream is \( 10^3 \).
        \[ 10^3 = 1000. \]
        \textbf{Case 2: Order of scoops does not matter.} We are interested in the combination of flavours regardless of the order. This is a problem of combinations with repetition. The number of ways to select the ice-cream is given by the formula for combinations with repetition:
        \[ \binom{n + k - 1}{k} \]
        where \( n \) is the number of options (flavours), and \( k \) is the number of selections (scoops). Here, \( n = 10 \) and \( k = 3 \):
        \[ \binom{10 + 3 - 1}{3} = \binom{12}{3} = \frac{12!}{3!9!} = \frac{12 \times 11 \times 10}{3 \times 2 \times 1} = 220. \]
        So there are 220 different combinations if we do not consider the order of scoops.

        For question (e), each of the five prizes can be awarded to any one of the three people independently, resulting in \( 3^5 \) ways.
        \[ 3^5 = 243. \]
        For question (f), every horse finishing in a unique position is a permutation of 6 items.
        \[ 6! = 720. \]
        \end{solution}
        \begin{exercise}
            Prove Multinomial Theorem by induction with Binomial Theorem
        \end{exercise}
        \begin{solution}
                the multinomial theorem states:
                \[
                (x_1 + x_2 + \cdots + x_k)^n = \sum \binom{n}{n_1, n_2, \ldots, n_k} x_1^{n_1} x_2^{n_2} \cdots x_k^{n_k},
                \]
                where the sum is taken over all sequences of non-negative integer indices $n_1, n_2, \ldots, n_k$ such that $n_1 + n_2 + \cdots + n_k = n$.
                
            \begin{proof}
                We will prove the multinomial theorem by induction on the number of terms $k$.
                
                \textbf{Base Case} ($k=2$):
                For $k=2$, the theorem reduces to the binomial theorem, which is already known to be true. That is,
                \[
                (x_1 + x_2)^n = \sum_{i=0}^{n} \binom{n}{i} x_1^{n-i} x_2^i.
                \]
                
                \textbf{Inductive Step}:
                Assume the theorem holds for some $k \geq 2$. We must show it also holds for $k+1$. Consider the expression $(x_1 + x_2 + \cdots + x_k + x_{k+1})^n$. We can write this as:
                \[
                \left((x_1 + x_2 + \cdots + x_k) + x_{k+1}\right)^n.
                \]
                By the binomial theorem, this is equal to:
                \[
                \sum_{i=0}^{n} \binom{n}{i} (x_1 + x_2 + \cdots + x_k)^{n-i} x_{k+1}^i.
                \]
                By the induction hypothesis, each term $(x_1 + x_2 + \cdots + x_k)^{n-i}$ can be expanded as:
                \[
                \sum \binom{n-i}{n_1, n_2, \ldots, n_k} x_1^{n_1} x_2^{n_2} \cdots x_k^{n_k},
                \]
                where the sum is taken over all sequences of non-negative integer indices $n_1, n_2, \ldots, n_k$ such that $n_1 + n_2 + \cdots + n_k = n-i$.
                
                Thus, the entire expression expands to:
                \[
                \sum_{i=0}^{n} \binom{n}{i} \sum \binom{n-i}{n_1, n_2, \ldots, n_k} x_1^{n_1} x_2^{n_2} \cdots x_k^{n_k} x_{k+1}^i,
                \]
                where the outer sum is taken over $i$ and the inner sum is taken over $n_1, n_2, \ldots, n_k$.
                
                This is the multinomial expansion for $k+1$ terms. By the principle of mathematical induction, the theorem is proved.
            \end{proof}
        \end{solution}




















